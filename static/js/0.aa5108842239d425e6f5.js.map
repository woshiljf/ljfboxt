{"version":3,"sources":["webpack:///src/components/searchBox/index.vue","webpack:///./src/components/searchBox/index.vue?d242","webpack:///./src/components/searchBox/index.vue","webpack:///./src/api/order.js"],"names":["searchBox","name","props","searchOptions","type","Array","default","listQuery","Object","orderUpdate","Function","data","searchQuery","loginLoading","created","key","this","assign_default","hasOwnProperty","methods","tick","$message","message","duration","onSubmit","formName","_this","$refs","validate","valid","console","log","userCode","JSON","parse","sessionStorage","getItem","params","$loading","lock","text","spinner","orderUpdateHandle","_this2","then","res","code","close","catch","err","finally","handleReset","deleteTrim","param","replace","split","newarr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","item","value","trim","push","return","components_searchBox","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","height","staticStyle","margin-top","ref","model","inline","size","_l","option","label","display","proptype","rules","prop","placeholder","callback","$$v","$set","expression","_e","_v","value-format","text-align","on","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","request","url","method","__WEBPACK_IMPORTED_MODULE_0__utils_request__"],"mappings":"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","file":"static/js/0.aa5108842239d425e6f5.js","sourcesContent":["<template>\r\n  <div>\r\n    <el-card class=\"box-card\">\r\n      <el-container>\r\n        <el-header height=\"\" class=\"elHeader\">\r\n          <div class=\"searchBox\" style=\"margin-top:10px\">\r\n            <el-row>\r\n              <el-col>\r\n                <el-form :model=\"searchQuery\" :inline=\"true\" ref=\"form\" size=\"small\">\r\n                  <div v-for=\"option in searchOptions\" :key=\"option.label\" style=\"display: inline-block\">        \r\n                      <el-form-item :label=\"option.label\" :rules=\"option.rules\" :prop=\"option.prop\" v-if=\"option.proptype==='input'\"> \r\n                        <el-input v-model=\"searchQuery[option.name]\" :placeholder=\"option.placeholder\" :type=\"option.type\"></el-input>\r\n                      </el-form-item>\r\n                      <el-form-item :label=\"option.label\" :rules=\"option.rules\" :prop=\"option.prop\" v-if=\"option.proptype==='select'\"> \r\n                        <el-select v-model=\"searchQuery[option.name]\" :placeholder=\"option.placeholder\">\r\n                          <el-option\r\n                            v-for=\"item in listQuery[option.name]\"\r\n                            :key=\"item.value\"\r\n                            :label=\"item.label\"\r\n                            :value=\"item.value\">\r\n                          </el-option>\r\n                        </el-select>\r\n                      </el-form-item>  \r\n                    <el-form-item :label=\"option.label\" v-if=\"option.proptype==='date'\">\r\n                        <div class=\"block\">\r\n                          <el-date-picker\r\n                            v-model=\"searchQuery[option.name]\"\r\n                            type=\"datetime\"\r\n                            placeholder=\"选择日期时间\"\r\n                            value-format=\"timestamp\"\r\n                            >\r\n                          </el-date-picker>\r\n                        </div>\r\n                    </el-form-item>\r\n                  </div>\r\n                </el-form>\r\n              </el-col>\r\n            </el-row>   \r\n          </div>\r\n        </el-header>\r\n        <el-main height=\"\" class=\"btn\" style=\"text-align:center\">\r\n          <div>\r\n            <el-button type=\"primary\" @click=\"onSubmit('form')\">更新订单</el-button>\r\n            <el-button @click=\"handleReset\">重置</el-button>\r\n          </div>\r\n        </el-main>\r\n      </el-container>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'SearchBox',\r\n  props:{\r\n    // 搜索参数\r\n    searchOptions: {\r\n      type: Array,\r\n      default: function() {\r\n        return []\r\n      }\r\n    },\r\n    // 查询参数\r\n    listQuery: {\r\n      type: Object,\r\n      default: function() {\r\n        return {}\r\n      }\r\n    },\r\n    // 订单更新函数\r\n    orderUpdate: {\r\n      type: Function\r\n    }\r\n  },\r\n  data(){\r\n    return {\r\n      searchQuery: '',\r\n      loginLoading: null\r\n    }\r\n  },\r\n  created() {\r\n    this.searchQuery = Object.assign({},this.listQuery)\r\n    // 清空值\r\n    for (const key in this.searchQuery) {\r\n      if (this.searchQuery.hasOwnProperty(key)) {\r\n        this.searchQuery[key] = ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    tick(){\r\n      this.$message({\r\n          message:'请选择任务下次触发时间',\r\n          type:'warning',\r\n          duration:2000\r\n      })\r\n      return\r\n    },\r\n    onSubmit(formName){\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          // if(this.searchQuery.hasOwnProperty('nextExecuteTime')){\r\n          //   if(this.searchQuery.nextExecuteTime===null ||this.searchQuery.nextExecuteTime===''){\r\n          //     this.tick()\r\n          //     return\r\n          //   }\r\n          // }\r\n          // 获取userCode\r\n          const userCode = JSON.parse(sessionStorage.getItem(\"userCode\")).userCode\r\n          // 请求参数\r\n          const data = Object.assign({},this.searchQuery)\r\n          const params = {data,userCode}\r\n          // 刷新动画\r\n          this.loginLoading = this.$loading({\r\n            lock: true,\r\n            text: '订单刷新中,请稍后。。。',\r\n            spinner: \"el-icon-loading\"\r\n          })\r\n          this.orderUpdateHandle(params)\r\n        } else {\r\n          console.log('error submit!!');\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    // 订单刷新\r\n    orderUpdateHandle(params){\r\n      this.orderUpdate(params)\r\n        .then(res=>{\r\n          if(res.data.code==0){\r\n            this.loginLoading.close()\r\n            this.$message({\r\n              message:'订单刷新成功',\r\n              type:'success',\r\n              duration:2000\r\n            })\r\n          }else{\r\n            this.loginLoading.close()\r\n            this.$message({\r\n              message:'操作失败',\r\n              type:'error',\r\n              duration:2000\r\n            })\r\n          }\r\n        }).catch(err=>{\r\n          console.log(err)\r\n          this.loginLoading.close()\r\n        }).finally(()=>{\r\n          this.loginLoading.close()\r\n        })\r\n    },\r\n    handleReset(){\r\n      // 清空请求搜索\r\n      for (const key in this.searchQuery) {\r\n        if (this.searchQuery.hasOwnProperty(key)) {\r\n          this.searchQuery[key] = ''\r\n        }\r\n      }\r\n    },\r\n    // 去除空格，回车，换行\r\n    deleteTrim(param){\r\n      var data = param.replace(/，/g,',').split(',')\r\n      var newarr = []\r\n      for (var item of data) {\r\n        item = item.replace(/[\\r\\n\\s]/g, '').trim()\r\n        if(item){\r\n          newarr.push(item)\r\n        }\r\n      }\r\n      return newarr\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.page-bar {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n.btn{\r\n  margin: 0;\r\n}\r\n.box-card{\r\n  text-align: center;\r\n}\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/searchBox/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{staticClass:\"box-card\"},[_c('el-container',[_c('el-header',{staticClass:\"elHeader\",attrs:{\"height\":\"\"}},[_c('div',{staticClass:\"searchBox\",staticStyle:{\"margin-top\":\"10px\"}},[_c('el-row',[_c('el-col',[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.searchQuery,\"inline\":true,\"size\":\"small\"}},_vm._l((_vm.searchOptions),function(option){return _c('div',{key:option.label,staticStyle:{\"display\":\"inline-block\"}},[(option.proptype==='input')?_c('el-form-item',{attrs:{\"label\":option.label,\"rules\":option.rules,\"prop\":option.prop}},[_c('el-input',{attrs:{\"placeholder\":option.placeholder,\"type\":option.type},model:{value:(_vm.searchQuery[option.name]),callback:function ($$v) {_vm.$set(_vm.searchQuery, option.name, $$v)},expression:\"searchQuery[option.name]\"}})],1):_vm._e(),_vm._v(\" \"),(option.proptype==='select')?_c('el-form-item',{attrs:{\"label\":option.label,\"rules\":option.rules,\"prop\":option.prop}},[_c('el-select',{attrs:{\"placeholder\":option.placeholder},model:{value:(_vm.searchQuery[option.name]),callback:function ($$v) {_vm.$set(_vm.searchQuery, option.name, $$v)},expression:\"searchQuery[option.name]\"}},_vm._l((_vm.listQuery[option.name]),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1):_vm._e(),_vm._v(\" \"),(option.proptype==='date')?_c('el-form-item',{attrs:{\"label\":option.label}},[_c('div',{staticClass:\"block\"},[_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"placeholder\":\"选择日期时间\",\"value-format\":\"timestamp\"},model:{value:(_vm.searchQuery[option.name]),callback:function ($$v) {_vm.$set(_vm.searchQuery, option.name, $$v)},expression:\"searchQuery[option.name]\"}})],1)]):_vm._e()],1)}),0)],1)],1)],1)]),_vm._v(\" \"),_c('el-main',{staticClass:\"btn\",staticStyle:{\"text-align\":\"center\"},attrs:{\"height\":\"\"}},[_c('div',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit('form')}}},[_vm._v(\"更新订单\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.handleReset}},[_vm._v(\"重置\")])],1)])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-292770e4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/searchBox/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-292770e4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-292770e4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-292770e4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/searchBox/index.vue\n// module id = null\n// module chunks = ","import request from '@/utils/request'\r\n\r\n// OMS订单更新接口\r\nexport function orderUpdate(data) {\r\n  return request({\r\n    url: '/bff/api/v1/operation/order/update',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// OMS任务状态更新\r\nexport function orderStatusUpdate(data) {\r\n  return request({\r\n    url: '/bff/api/v1/operation/task/update',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// OMS退货单更新\r\nexport function orderReturnUpdate(data) {\r\n  return request({\r\n    url: '/bff/api/v1/operation/return_order/update',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// OMS订单明细更新\r\nexport function orderDetailUpdate(data) {\r\n  return request({\r\n    url:'/bff/api/v1/operation/order/item/update',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// OMS退货单明细更新\r\nexport function orderReturnDetailUpdate(data) {\r\n  return request({\r\n    url:'/bff/api/v1/operation/return_order/item/update',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/order.js"],"sourceRoot":""}